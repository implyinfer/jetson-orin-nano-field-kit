version: "3.8"

services:
  kiwix:
    image: ghcr.io/kiwix/kiwix-serve
    ports:
      - "8001:8080"
    volumes:
      - ./kiwix/data:/data
    command: ["*.zim", "-i", "all", "-p", "6000"]
    restart: unless-stopped

  roboflow:
    image: roboflow/roboflow-inference-server-jetson-6.0.0
    ports:
      - "9001:9001"
    restart: unless-stopped

  open-webui:
    image: ghcr.io/open-webui/open-webui:main
    network_mode: host
    volumes:
      - ${HOME}/open-webui:/app/backend/data
    environment:
      - OLLAMA_BASE_URL=http://127.0.0.1:11434
    restart: always

  # Ultralytics is kept separate as it's typically run interactively
  # Use: docker compose -f ultralytics/docker-compose.yml run --rm ultralytics

